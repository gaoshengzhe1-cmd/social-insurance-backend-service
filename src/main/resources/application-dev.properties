# ===========================================
# Server Configuration
# ===========================================
# Server port configuration with environment variable override support, default port 9002
server.port=${PORT:9002}

# ===========================================
# Database Connection Configuration (R2DBC - Reactive Database Connection)
# ===========================================
# PostgreSQL database connection URL with environment variable override support
spring.r2dbc.url=${DB_URL:r2dbc:postgresql://localhost:5432/social_insurance}
# Database username with environment variable override support
spring.r2dbc.username=${DB_USER:social_insurance_app}
# Database password with environment variable override support
spring.r2dbc.password=${DB_PASSWORD:NewStrongPassword123!}

# ===========================================
# Database Migration Configuration (Flyway)
# ===========================================
# Enable Flyway database migration tool
spring.flyway.enabled=true
# JDBC connection URL used by Flyway (different from R2DBC, Flyway requires JDBC)
spring.flyway.url=${FLYWAY_URL:jdbc:postgresql://localhost:5432/social_insurance}
# Flyway database username
spring.flyway.user=${DB_USER:social_insurance_app}
# Flyway database password
spring.flyway.password=${DB_PASSWORD:NewStrongPassword123!}
# Database migration script location
spring.flyway.locations=classpath:db/migration
# Automatically create baseline version during migration
spring.flyway.baseline-on-migrate=true
# Baseline version number
spring.flyway.baseline-version=0
# Whether to validate scripts during migration (recommended to disable in development)
spring.flyway.validate-on-migrate=false

# ===========================================
# Logging Configuration
# ===========================================
# Enable Flyway logging
logging.level.org.flywaydb=DEBUG
logging.level.org.springframework.boot.autoconfigure.flyway=DEBUG
logging.level.org.springframework.r2dbc=DEBUG


# 启用所有 Actuator 端点
management.endpoints.web.exposure.include=*
management.endpoint.health.show-details=always
management.endpoint.health.show-components=always

# 确保健康检查端点已启用
management.endpoint.health.enabled=true
management.health.db.enabled=true
management.health.defaults.enabled=true

# ===========================================
# Social Insurance Configuration
# ===========================================
social.insurance.care-insurance-age-threshold=40
social.insurance.employment-rate-general=0.0055
social.insurance.employee-contribution-ratio=0.5

# Tax Table Configuration
social.insurance.tax-table.dependents-cap=7
social.insurance.tax-table.income-brackets=88000, 170000, 350000, 740000, 780000, 950000, 1700000, 2170000, 2210000, 2250000, 3500000
social.insurance.tax-table.tax-rates=0.05105, 0.035, 0.05105, 0.2042, 0.23483, 0.33693, 0.4084, 0.4084, 0.4084, 0.45945
social.insurance.tax-table.base-taxes=0,0,0,0,0,0,0,0,130,0,0,0,0,0,0,0,73390,66920,60450,53980,47520,41050,34580,28120,81560,75090,68620,62150,55690,49220,42750,36290,121480,115010,108540,102070,95610,89140,82670,76210,374180,367710,361240,354770,348310,341840,335370,328910,571570,565090,558630,552160,545690,539230,532760,526290,593340,586870,580410,573930,567470,561010,554540,548070,615120,608650,602190,595710,589250,582790,576310,569850,1125620,1119150,1112690,1106210,1099750,1093290,1086810,1080350