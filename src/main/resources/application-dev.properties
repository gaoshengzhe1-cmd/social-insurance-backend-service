# ===========================================
# Server Configuration
# ===========================================
# Server port configuration with environment variable override support, default port 9002
server.port=${PORT:9002}

# ===========================================
# Database Connection Configuration (R2DBC - Reactive Database Connection)
# ===========================================
# PostgreSQL database connection URL with environment variable override support
spring.r2dbc.url=${DB_URL:r2dbc:postgresql://localhost:5432/social_insurance}
# Database username with environment variable override support
spring.r2dbc.username=${DB_USER:postgres}
# Database password with environment variable override support
spring.r2dbc.password=${DB_PASSWORD:660622}

# ===========================================
# Database Migration Configuration (Flyway)
# ===========================================
# Enable Flyway database migration tool
spring.flyway.enabled=true
# JDBC connection URL used by Flyway (different from R2DBC, Flyway requires JDBC)
spring.flyway.url=${FLYWAY_URL:jdbc:postgresql://localhost:5432/social_insurance}
# Flyway database username
spring.flyway.user=${DB_USER:postgres}
# Flyway database password
spring.flyway.password=${DB_PASSWORD:660622}
# Database migration script location
spring.flyway.locations=classpath:db/migration
# Automatically create baseline version during migration
spring.flyway.baseline-on-migrate=true
# Baseline version number
spring.flyway.baseline-version=0
# Whether to validate scripts during migration (recommended to disable in development)
spring.flyway.validate-on-migrate=false

# ===========================================
# Logging Configuration
# ===========================================
# Enable Flyway logging
logging.level.org.flywaydb=DEBUG
logging.level.org.springframework.boot.autoconfigure.flyway=DEBUG
logging.level.org.springframework.r2dbc=DEBUG


# 启用所有 Actuator 端点
management.endpoints.web.exposure.include=*
management.endpoint.health.show-details=always
management.endpoint.health.show-components=always

# 确保健康检查端点已启用
management.endpoint.health.enabled=true
management.health.db.enabled=true
management.health.defaults.enabled=true